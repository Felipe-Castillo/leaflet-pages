"use strict";(self.webpackChunktest_angular=self.webpackChunktest_angular||[]).push([[783],{9783:(A,c,i)=>{i.r(c),i.d(c,{GraphicModule:()=>M});var l=i(1590),m=i(5861),f=i(3470),t=i(1223),v=i(8413),h=i(2382),d=i(9808);let C=(()=>{class e{constructor(n,a){this.el=n,this._zone=a,this.updateChange=new t.vpe(!0),this.chartInstance=new t.vpe}ngOnChanges(n){const a=n.update&&n.update.currentValue;(n.options||a)&&(this.wrappedUpdateOrCreateChart(),a&&this.updateChange.emit(!1))}wrappedUpdateOrCreateChart(){this.runOutsideAngular?this._zone.runOutsideAngular(()=>{this.updateOrCreateChart()}):this.updateOrCreateChart()}updateOrCreateChart(){this.chart&&this.chart.update?this.chart.update(this.options,!0,this.oneToOne||!1):(this.chart=this.Highcharts[this.constructorType||"chart"](this.el.nativeElement,this.options,this.callbackFunction||null),this.chartInstance.emit(this.chart))}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=null)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.SBq),t.Y36(t.R0b))},e.\u0275cmp=t.Xpm({type:e,selectors:[["highcharts-chart"]],inputs:{Highcharts:"Highcharts",constructorType:"constructorType",callbackFunction:"callbackFunction",oneToOne:"oneToOne",runOutsideAngular:"runOutsideAngular",options:"options",update:"update"},outputs:{updateChange:"updateChange",chartInstance:"chartInstance"},features:[t.TTD],decls:0,vars:0,template:function(n,a){},encapsulation:2}),e})(),y=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({}),e})();function T(e,r){if(1&e&&(t.TgZ(0,"option",13),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.Q6J("value",n.value),t.xp6(1),t.hij(" ",n.text," ")}}const O=[{path:"",component:(()=>{class e{constructor(n){this._element_service=n,this.updateFromInput=!1,this.dump_arr=[],this.options=[{value:"tipo_lampara",text:"Tipo Lampara"},{value:"tipo_luminaria",text:"Tipo Luminaria"},{value:"tipo_soporte",text:"Tipo Soporte"}],this.Highcharts=f,this.optFromInputString={title:{text:""},series:[{data:[],type:"pie",name:"Luminarias"}],credits:{enabled:!1}},this.optFromInput=this.optFromInputString}updateInputChart(){this.optFromInput={title:{text:""},series:[{data:this.dump_arr,type:"pie"}],credits:{enabled:!1}}}ngOnInit(){}show_grahpic(n){this.getLayers().then(s=>{this.dump_arr=this.calculate_graphic_values(s,n.target.value),this.updateInputChart()})}calculate_graphic_values(n,a){let s=n.features.map(p=>p.properties[a]),o=[...new Set(s)].filter(p=>p),g=[];for(const p in o){let u=[],Z=s.filter(x=>x==o[p]).length;u.push(o[p]),u.push(Z),g.push(u)}return g}getLayers(){return(0,m.Z)(function*(){return yield(yield fetch("assets/data/luminarias.geojson")).json()})()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.d))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-graphic"]],decls:17,vars:5,consts:[[1,"row"],[1,"card-body","d-flex","flex-column","align-items-start"],[1,"d-inline-block","mb-2","text-success"],[1,"col-md-12","col-sm-12","col-xs-12"],[1,"text-muted"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-list"],["name","","id","",1,"form-control",3,"change"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"fade-in",2,"width","100%","height","400px","display","block","height","auto","margin","0 auto","padding","10px","position","relative",3,"Highcharts","options","update","oneToOne","updateChange"],[3,"value"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"strong",2),t._uU(3,"Analisis Grafico"),t.qZA()(),t.TgZ(4,"div",3)(5,"h6",4),t._uU(6,"Seleccione una opci\xf3n:"),t.qZA(),t.TgZ(7,"div",5)(8,"div",6)(9,"span",7),t._UZ(10,"i",8),t.qZA()(),t.TgZ(11,"select",9),t.NdJ("change",function(o){return a.show_grahpic(o)}),t.TgZ(12,"option",10),t._uU(13,"-Seleccione-"),t.qZA(),t.YNc(14,T,2,2,"option",11),t.qZA()()(),t.TgZ(15,"div",3)(16,"highcharts-chart",12),t.NdJ("updateChange",function(o){return a.updateFromInput=o}),t.qZA()()()),2&n&&(t.xp6(14),t.Q6J("ngForOf",a.options),t.xp6(2),t.Q6J("Highcharts",a.Highcharts)("options",a.optFromInput)("update",a.updateFromInput)("oneToOne",!0))},directives:[h.YN,h.Kr,d.sg,C],styles:["div[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-content:center}span[_ngcontent-%COMP%]{height:100%}.center-container[_ngcontent-%COMP%]{height:auto;margin:0 auto;padding:10px;position:relative}"]}),e})(),data:{title:"Graficos"}}];let F=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[],imports:[[l.Bz.forChild(O)],l.Bz]}),e})();var G=i(520);let M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[],imports:[[F,h.u5,h.UX,G.JF,y,d.ez]]}),e})()}}]);